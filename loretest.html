<html>
<head>
    <script src="d3.min.js"></script>
    </head>
        <body>
            <svg>
            </svg>
            <script>
                d3.csv('data/olympics_2012.csv', loaded);
                
                function loaded(data){
                    
                    console.log(data)
                    
                    var countries = d3.nest()
                            .key (function(d){
                            return d.team;
                            
                        })
                        .sortKeys(d3.ascending)
                        .entries(data)
                    
                    countries.sort(function(a,b){
                        return d3.ascending(b.values.length, a.values.length)  
                    })
                    
                    d3.select('svg')
                        .selectAll('rect')
                        .data(countries)
                        .enter()
                        .append('rect')
                        .attr('height', 5)
                        .attr('width', function(d,i){
                            return 10*d.values.length
                        })
                        .attr('y', function(d,i){
                            return i*6
                        })
                    
                    console.log (countries);
                    
                    d3.select('svg')
                        .attr('height', 10*countries.length)
                }
            </script>
        </body>
</html>