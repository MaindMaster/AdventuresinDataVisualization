<html>
    <head>
        <script src="library/d3.min.js" charset="utf-8"></script>
        <title>Test D3.js</title>
    </head>
    <body>
        <svg width="1000px"></svg>
        <script>
            d3.csv('../data/olympics_2012.csv',loaded);
            
            function loaded (data){
                
                
                var bmi =  d3.nest()
                                .key(function(d) {
                                    return (d.weight_kg/(d.height_cm*d.height_cm/100));
                                })
                                .sortKeys(d3.ascending)
                                .entries(data);
                
                /*var mapy = d3.scale.linear()
                                .domain([0, bmi.length])
                                .range([0, 1000])
                */                    
                console.log(bmi[10])
                
                
                d3.select('svg')
                        .selectAll('rect')
                        .data(bmi)
                        .enter()
                        .append('rect')
                        .attr('height', 2)
                        .attr('width', function(d,i){
                            return d.values.length
                        })
                        /*.attr('y', function(d,i){
                            return mapy(i)
                        })*/
                    
                    
                    d3.select('svg')
                        .attr('height', bmi.length)
                       /* .attr('width', function(d,i){
                            return 0
                        })*/
                   
            }
        </script>
    </body>
</html>