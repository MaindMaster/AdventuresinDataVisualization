<html>
    <head>
        <script src="library/d3.min.js" charset="utf-8"></script>
        <title>Test D3.js</title>
    </head>
    <body>
        <svg></svg>
        <script>
            d3.csv('../data/olympics_2012.csv',loaded);
            
            function loaded (data){
                
                var medal =  d3.nest()
                                .key(function(d) {
                                    return d.medal;
                                })
                                .sortKeys(d3.ascending)
                                .entries(data);
                
                var zodiac =  d3.nest()
                                .key(function(d) {
                                    return d.birth;
                                })
                                .sortKeys(d3.ascending)
                                .entries(data);
                
                medal.sort(function(a,b) {
                    return d3.ascending(b.values.length, a.values.length)
                })
                
                zodiac.sort(function(a,b) {
                    return d3.ascending(b.values.length, a.values.length)
                })
                
                d3.select('svg')
                    .selectAll('rect')
                    .data(medal)
                    .enter()
                    .append('rect')
                    .attr('height',4)
                    .attr('width', function(d,i) {
                        return d.values.length
                    })
                    .attr('y', function (d,i) {
                        return i*5
                    })
                
                console.log(medal);
                console.log(zodiac);
                 
            }
        </script>
    </body>
</html>